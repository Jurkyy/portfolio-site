---
/**
 * NoiseOverlay.astro
 * Subtle noise texture overlay using SVG feTurbulence for a film grain aesthetic.
 * Replaces the dated CRT scanlines effect with a more modern, performant alternative.
 */
interface Props {
  opacity?: number;
}

const { opacity = 0.03 } = Astro.props;
---

<div
  class="noise-overlay"
  style={`--noise-opacity: ${opacity};`}
  aria-hidden="true"
>
  <svg width="100%" height="100%">
    <filter id="noise-filter">
      <feTurbulence
        type="fractalNoise"
        baseFrequency="0.8"
        numOctaves="4"
        stitchTiles="stitch"
      />
    </filter>
    <rect width="100%" height="100%" filter="url(#noise-filter)" />
  </svg>
</div>

<style>
  .noise-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 9999;
    pointer-events: none;
    overflow: hidden;
    opacity: var(--noise-opacity);
  }

  .noise-overlay svg {
    width: 100%;
    height: 100%;
  }

  /* Respect reduced motion - hide effect entirely */
  @media (prefers-reduced-motion: reduce) {
    .noise-overlay {
      display: none;
    }
  }

  /* High contrast mode - disable effect */
  @media (forced-colors: active) {
    .noise-overlay {
      display: none;
    }
  }
</style>
